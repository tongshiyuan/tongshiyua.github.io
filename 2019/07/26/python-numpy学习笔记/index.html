<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2">





















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="列表与array的区别 在实现层面，数组基本上包含一个指向连续数据块的指针。另一方面，Python列表包含一个指向指针块的指针，这其中的每一个指针对应一个完整的Python对象。另外，列表的优势是灵活，因为每个列表元素是一个包含数据和类型信息的完整结构体，而且列表可以用任意类型的数据填充。固定类型的NumPy式数组缺乏这种灵活性，但是能更有效地存储和操作数据。  导入numpy1import nu">
<meta name="keywords" content="python,numpy,数据科学">
<meta property="og:type" content="article">
<meta property="og:title" content="python: numpy学习笔记">
<meta property="og:url" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/index.html">
<meta property="og:site_name" content="Taro">
<meta property="og:description" content="列表与array的区别 在实现层面，数组基本上包含一个指向连续数据块的指针。另一方面，Python列表包含一个指向指针块的指针，这其中的每一个指针对应一个完整的Python对象。另外，列表的优势是灵活，因为每个列表元素是一个包含数据和类型信息的完整结构体，而且列表可以用任意类型的数据填充。固定类型的NumPy式数组缺乏这种灵活性，但是能更有效地存储和操作数据。  导入numpy1import nu">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_85_0.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_99_1.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_126_0.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_128_0.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_143_1.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_144_0.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_155_1.png">
<meta property="og:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_156_0.png">
<meta property="og:updated_time" content="2019-07-26T02:14:54.428Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python: numpy学习笔记">
<meta name="twitter:description" content="列表与array的区别 在实现层面，数组基本上包含一个指向连续数据块的指针。另一方面，Python列表包含一个指向指针块的指针，这其中的每一个指针对应一个完整的Python对象。另外，列表的优势是灵活，因为每个列表元素是一个包含数据和类型信息的完整结构体，而且列表可以用任意类型的数据填充。固定类型的NumPy式数组缺乏这种灵活性，但是能更有效地存储和操作数据。  导入numpy1import nu">
<meta name="twitter:image" content="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/output_85_0.png">



  <link rel="alternate" href="/atom.xml" title="Taro" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>python: numpy学习笔记 | Taro</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/tongshiyuan" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Taro</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="TongShiyuan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/logo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taro">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">python: numpy学习笔记

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-26 10:08:55 / 修改时间：10:14:54" itemprop="dateCreated datePublished" datetime="2019-07-26T10:08:55+08:00">2019-07-26</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python学习笔记/" itemprop="url" rel="index"><span itemprop="name">python学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="列表与array的区别"><a href="#列表与array的区别" class="headerlink" title="列表与array的区别"></a>列表与array的区别</h3><ul>
<li>在实现层面，数组基本上包含一个指向连续数据块的指针。另一方面，Python列表包含一个指向指针块的指针，这其中的每一个指针对应一个完整的Python对象。另外，列表的优势是灵活，因为每个列表元素是一个包含数据和类型信息的完整结构体，而且列表可以用任意类型的数据填充。固定类型的NumPy式数组缺乏这种灵活性，但是能更有效地存储和操作数据。</li>
</ul>
<h3 id="导入numpy"><a href="#导入numpy" class="headerlink" title="导入numpy"></a>导入numpy</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>

<h3 id="array的创建"><a href="#array的创建" class="headerlink" title="array的创建"></a>array的创建</h3><h4 id="从列表创建数组"><a href="#从列表创建数组" class="headerlink" title="从列表创建数组"></a>从列表创建数组</h4><ul>
<li>通过 list 创建一维 array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>]</span><br><span class="line">nd1 = np.array(list1)</span><br><span class="line">print(nd1)</span><br><span class="line">print(type(nd1))</span><br></pre></td></tr></table></figure>

<pre><code>[1 3 5 7]
&lt;class &apos;numpy.ndarray&apos;&gt;</code></pre><ul>
<li>通过 list 创建二维 array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list2 = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>],[<span class="number">4</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">3</span>]]</span><br><span class="line">nd2 = np.array(list2)</span><br><span class="line">print(nd2)</span><br><span class="line">print(type(nd2))</span><br></pre></td></tr></table></figure>

<pre><code>[[1 2 4 8]
 [4 5 9 3]]
&lt;class &apos;numpy.ndarray&apos;&gt;</code></pre><ul>
<li>如果需要明确数组的数据类型，可以用<code>dtype</code>关键字</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>], dtype=<span class="string">'float32'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([1., 3., 4.], dtype=float32)</code></pre><h4 id="从头创建数组"><a href="#从头创建数组" class="headerlink" title="从头创建数组"></a>从头创建数组</h4><ul>
<li>通过范围创建 array</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 线性序列</span></span><br><span class="line"><span class="comment"># 从10开始，1结束（不包含），步长为-1</span></span><br><span class="line"><span class="comment"># arange([start,]stop[,step],dtype=None)</span></span><br><span class="line">np.arange(<span class="number">10</span>, <span class="number">1</span>, <span class="number">-1</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([10,  9,  8,  7,  6,  5,  4,  3,  2])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建五个元素的数组，这5个数均匀地分配到0-1</span></span><br><span class="line">np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([0.  , 0.25, 0.5 , 0.75, 1.  ])</code></pre><ul>
<li>生成特殊矩阵</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全零矩阵</span></span><br><span class="line">np.zeros((<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">np.zeros(<span class="number">5</span>, dtype=int)</span><br></pre></td></tr></table></figure>

<pre><code>array([0, 0, 0, 0, 0])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全一矩阵</span></span><br><span class="line">np.ones((<span class="number">4</span>,<span class="number">4</span>), dtype=float)</span><br><span class="line">np.ones(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([1., 1., 1., 1., 1.])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认值一直的矩阵</span></span><br><span class="line">np.full((<span class="number">3</span>, <span class="number">5</span>), <span class="number">3.4</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([[3.4, 3.4, 3.4, 3.4, 3.4],
       [3.4, 3.4, 3.4, 3.4, 3.4],
       [3.4, 3.4, 3.4, 3.4, 3.4]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单位矩阵</span></span><br><span class="line">np.eye(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([[1., 0., 0.],
       [0., 1., 0.],
       [0., 0., 1.]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对角线矩阵</span></span><br><span class="line">np.diag([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 0, 0, 0],
       [0, 2, 0, 0],
       [0, 0, 3, 0],
       [0, 0, 0, 4]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个由3个整型数组成的未初始化的数组</span></span><br><span class="line"><span class="comment"># 数组的值是内存空间中的任意值</span></span><br><span class="line">np.empty(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([1., 1., 1.])</code></pre><ul>
<li>生成随机数组<ul>
<li>random生成0到1之间的随机数</li>
<li>uniform生成均匀分布随机数</li>
<li>randn生成标准正态的随机数</li>
<li>normal生成正态分布</li>
<li>shuffle随机打乱顺序</li>
<li>seed设置随机种子数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设计随机种子</span></span><br><span class="line">np.random.seed(<span class="number">123</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个3*3、在0-1均匀分布的随机数组成的数组</span></span><br><span class="line">x = np.random.random((<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[[0.69646919 0.28613933 0.22685145]
 [0.55131477 0.71946897 0.42310646]
 [0.9807642  0.68482974 0.4809319 ]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打乱随机数</span></span><br><span class="line">np.random.shuffle(x)</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[[0.9807642  0.68482974 0.4809319 ]
 [0.69646919 0.28613933 0.22685145]
 [0.55131477 0.71946897 0.42310646]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个3*3的、均值为0，方差为1的正态分布的随机数数组</span></span><br><span class="line">np.random.normal(<span class="number">0</span>, <span class="number">1</span>, (<span class="number">3</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<pre><code>array([[ 1.26593626, -0.8667404 , -0.67888615],
       [-0.09470897,  1.49138963, -0.638902  ],
       [-0.44398196, -0.43435128,  2.20593008]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个3*3，[0, 10)区间的随机整型数组</span></span><br><span class="line">np.random.randint(<span class="number">0</span>, <span class="number">10</span>, (<span class="number">3</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<pre><code>array([[8, 0, 7],
       [9, 3, 4],
       [6, 1, 5]])</code></pre><h3 id="Numpy数据类型"><a href="#Numpy数据类型" class="headerlink" title="Numpy数据类型"></a>Numpy数据类型</h3><h4 id="指定方式"><a href="#指定方式" class="headerlink" title="指定方式"></a>指定方式</h4><ul>
<li><p>字符串</p>
<p>  <code>dtype=&#39;int16&#39;</code></p>
</li>
<li><p>numpy对象</p>
<p>  <code>dtype=np.int16</code></p>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4></li>
<li><p>数据类型:描述</p>
<ul>
<li>bool_:布尔值（真、True 或假、False），用一个字节存储</li>
<li>int_ : 默认整型（类似于 C 语言中的 long，通常情况下是 int64 或 int32）</li>
<li>intc_ : 同 C 语言的 int 相同（通常是 int32 或 int64）</li>
<li>intp : 用作索引的整型（和 C 语言的 ssize_t 相同，通常情况下是 int32 或 int64）</li>
<li>int8 : 字节（byte，范围从–128 到 127）</li>
<li>int16 : 整型（范围从–32768 到 32767）</li>
<li>int32 : 整型（范围从–2147483648 到 2147483647）</li>
<li>int64 : 整型（范围从–9223372036854775808 到 9223372036854775807）</li>
<li>uint8 : 无符号整型（范围从 0 到 255）</li>
<li>uint16 : 无符号整型（范围从 0 到 65535）</li>
<li>uint32 : 无符号整型（范围从 0 到 4294967295）</li>
<li>uint64 : 无符号整型（范围从 0 到 18446744073709551615）</li>
<li>float_ : float64 的简化形式</li>
<li>float16 : 半精度浮点型：符号比特位，5 比特位指数（exponent），10 比特位尾数（mantissa）</li>
<li>float32 : 单精度浮点型：符号比特位，8 比特位指数，23 比特位尾数</li>
<li>float64 : 双精度浮点型：符号比特位，11 比特位指数，52 比特位尾数</li>
<li>complex_ : complex128 的简化形式</li>
<li>complex64 : 复数，由两个 32 位浮点数表示</li>
<li>complex128 : 复数，由两个 64 位浮点数表示</li>
</ul>
</li>
</ul>
<h3 id="查看属性"><a href="#查看属性" class="headerlink" title="查看属性"></a>查看属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># shape</span></span><br><span class="line">nd2.shape</span><br></pre></td></tr></table></figure>

<pre><code>(2, 4)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># size 元素的个数</span></span><br><span class="line">nd2.size</span><br></pre></td></tr></table></figure>

<pre><code>8</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据类型</span></span><br><span class="line">nd2.dtype</span><br></pre></td></tr></table></figure>

<pre><code>dtype(&apos;int32&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组的维度</span></span><br><span class="line">nd2.ndim</span><br></pre></td></tr></table></figure>

<pre><code>2</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个数组元素字节大小</span></span><br><span class="line">nd2.itemsize</span><br></pre></td></tr></table></figure>

<pre><code>4</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数组总字节大小</span></span><br><span class="line"><span class="comment"># 一般认为 nbytes 跟 itemsize 和 size 的乘积大小相等</span></span><br><span class="line">nd2.nbytes</span><br></pre></td></tr></table></figure>

<pre><code>32</code></pre><h3 id="数据的索引"><a href="#数据的索引" class="headerlink" title="数据的索引"></a>数据的索引</h3><h4 id="获取单个元素"><a href="#获取单个元素" class="headerlink" title="获取单个元素"></a>获取单个元素</h4><ul>
<li><p>对于一维数组，直接通过中括号指定索引获取第i个值（从0开始计数）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[1]</span><br></pre></td></tr></table></figure>
</li>
<li><p>用负值索引末尾索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[-1]</span><br></pre></td></tr></table></figure>
</li>
<li><p>多维数组中，可以用逗号分隔的索引元组获取元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[2, -1]</span><br></pre></td></tr></table></figure>
</li>
<li><p>用以上索引方式修改元素值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[0, 0] = 12</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>NumPy 数组是固定类型的。这意味着当你试图将一个浮点值插入一个整型数组时，浮点值会被截短成整型。并且这种截短是自动完成的，不会给你提示或警告，所以需要特别注意这一点！</li>
</ul>
<h3 id="数据的切片"><a href="#数据的切片" class="headerlink" title="数据的切片"></a>数据的切片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[start:stop:step]</span><br></pre></td></tr></table></figure>

<ul>
<li>当上述参数均未指定，那么缺省值为：<code>start = 0</code>、<code>stop = 维度的大小（size of dimension）</code> 和 <code>step = 1</code><h4 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h4></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line">x[:<span class="number">5</span>] <span class="comment"># 前五个元素</span></span><br></pre></td></tr></table></figure>

<pre><code>array([0, 1, 2, 3, 4])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">5</span>:] <span class="comment"># 索引5以后的元素</span></span><br></pre></td></tr></table></figure>

<pre><code>array([5, 6, 7, 8, 9])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">4</span>:<span class="number">7</span>] <span class="comment"># 索引4到6</span></span><br></pre></td></tr></table></figure>

<pre><code>array([4, 5, 6])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[::<span class="number">2</span>] <span class="comment"># 隔一个元素</span></span><br></pre></td></tr></table></figure>

<pre><code>array([0, 2, 4, 6, 8])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[::<span class="number">-1</span>] <span class="comment"># 逆序取所有元素</span></span><br></pre></td></tr></table></figure>

<pre><code>array([9, 8, 7, 6, 5, 4, 3, 2, 1, 0])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[<span class="number">5</span>::<span class="number">-2</span>] <span class="comment"># 从索引5隔一个逆序</span></span><br></pre></td></tr></table></figure>

<pre><code>array([5, 3, 1])</code></pre><h4 id="多维子数组"><a href="#多维子数组" class="headerlink" title="多维子数组"></a>多维子数组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x2 = np.array([range(<span class="number">1</span> + i, <span class="number">5</span> + i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>)])</span><br><span class="line">x2[:<span class="number">2</span>, :<span class="number">3</span>] <span class="comment"># 两行三列</span></span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 2, 3],
       [2, 3, 4]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x2[:, ::<span class="number">2</span>] <span class="comment"># 所有行，隔一列</span></span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 3],
       [2, 4],
       [3, 5],
       [4, 6],
       [5, 7]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x2[::<span class="number">-1</span>, ::<span class="number">-1</span>] <span class="comment"># 逆序</span></span><br></pre></td></tr></table></figure>

<pre><code>array([[8, 7, 6, 5],
       [7, 6, 5, 4],
       [6, 5, 4, 3],
       [5, 4, 3, 2],
       [4, 3, 2, 1]])</code></pre><h4 id="行、列获取"><a href="#行、列获取" class="headerlink" title="行、列获取"></a>行、列获取</h4><ul>
<li>一个冒号（:）表示空切片</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x2[:, <span class="number">1</span>] <span class="comment"># 第二列</span></span><br></pre></td></tr></table></figure>

<pre><code>array([2, 3, 4, 5, 6])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x2[<span class="number">1</span>, :] <span class="comment"># 第二行</span></span><br></pre></td></tr></table></figure>

<pre><code>array([2, 3, 4, 5])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x2[<span class="number">1</span>] <span class="comment"># 行的简便写法</span></span><br></pre></td></tr></table></figure>

<pre><code>array([2, 3, 4, 5])</code></pre><h4 id="非副本视图的子数组"><a href="#非副本视图的子数组" class="headerlink" title="非副本视图的子数组"></a>非副本视图的子数组</h4><ul>
<li>是数组切片返回的是数组数据的视图，而不是数值数据的副本</li>
<li>意思就是说，当修改子数组的数据时，原数据也会被修改</li>
<li>它意味着在处理非常大的数据集时，可以获取或处理这些数据集的片段，而不用复制底层的数据缓存</li>
</ul>
<h4 id="创建数组的副本"><a href="#创建数组的副本" class="headerlink" title="创建数组的副本"></a>创建数组的副本</h4><p>通过<code>copy()</code>来完成复制数组里的数据或者子数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x_sub = x2[:2, :2].copy()</span><br></pre></td></tr></table></figure>

<h3 id="数据的变形"><a href="#数据的变形" class="headerlink" title="数据的变形"></a>数据的变形</h3><p>通过<code>reshape()</code>实现数组变形</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.arange(1, 10).reshape((3, 3))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>原始数组的大小和变形后数组的大小一致</p>
</li>
<li><p>如果不能保证上述条件，<code>-1</code>表示自动填充位置的维度</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.arange(1, 10).reshape((3, -1))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用newaxis将一个一维数组转变为二维的行或列的矩阵</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 行矩阵</span><br><span class="line">x[np.newaxis, :]</span><br><span class="line"># 列矩阵</span><br><span class="line">x[:, np.newaxis]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="数组的拼接和分裂"><a href="#数组的拼接和分裂" class="headerlink" title="数组的拼接和分裂"></a>数组的拼接和分裂</h3><h4 id="数组的拼接"><a href="#数组的拼接" class="headerlink" title="数组的拼接"></a>数组的拼接</h4><ul>
<li><code>np.concatenate</code><ul>
<li>以<code>数组元组或数组列表</code>作为第一个参数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拼接两个数组</span></span><br><span class="line">x = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">y = np.array([<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line">np.concatenate([x, y])</span><br></pre></td></tr></table></figure>

<pre><code>array([1, 2, 3, 3, 2, 1])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拼接多个数组</span></span><br><span class="line">z = [<span class="number">11</span>, <span class="number">11</span>, <span class="number">11</span>]</span><br><span class="line">np.concatenate([x, y, z])</span><br></pre></td></tr></table></figure>

<pre><code>array([ 1,  2,  3,  3,  2,  1, 11, 11, 11])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二维数组拼接</span></span><br><span class="line"><span class="comment"># 按第一个轴拼接，上下拼接</span></span><br><span class="line">grid = np.array([range(<span class="number">1</span> + i, <span class="number">5</span> + i) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)])</span><br><span class="line">np.concatenate([grid, grid])</span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 2, 3, 4],
       [2, 3, 4, 5],
       [3, 4, 5, 6],
       [1, 2, 3, 4],
       [2, 3, 4, 5],
       [3, 4, 5, 6]])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按第二个轴拼接，左右拼接</span></span><br><span class="line">np.concatenate([grid, grid], axis = <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 2, 3, 4, 1, 2, 3, 4],
       [2, 3, 4, 5, 2, 3, 4, 5],
       [3, 4, 5, 6, 3, 4, 5, 6]])</code></pre><ul>
<li><code>np.vstack</code> 垂直栈</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.vstack([x, y])</span><br></pre></td></tr></table></figure>

<pre><code>array([[1, 2, 3],
       [3, 2, 1]])</code></pre><ul>
<li><code>np.hstack</code> 水平栈</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.hstack([x, y])</span><br></pre></td></tr></table></figure>

<pre><code>array([1, 2, 3, 3, 2, 1])</code></pre><ul>
<li><code>np.dstack</code> 沿着第三个维度拼接数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.dstack([x, y])</span><br></pre></td></tr></table></figure>

<pre><code>array([[[1, 3],
        [2, 2],
        [3, 1]]])</code></pre><h4 id="数组的分裂"><a href="#数组的分裂" class="headerlink" title="数组的分裂"></a>数组的分裂</h4><ul>
<li>与拼接相反的过程，通过<code>np.split</code>、<code>np.hsplit</code>和<code>np.vsplit</code>来实现</li>
<li>传递一个索引列表作为参数，索引列表记录的是分裂点位置</li>
<li>N个分裂点会得到 N + 1 个子数组</li>
</ul>
<p><code>np.split</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">np.split(x, [<span class="number">3</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[array([1, 2, 3]), array([4, 5]), array([6, 7])]</code></pre><p><code>np.vsplit()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grid = np.arange(<span class="number">16</span>).reshape((<span class="number">4</span>,<span class="number">-1</span>))</span><br><span class="line">np.vsplit(grid, [<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[array([[0, 1, 2, 3],
        [4, 5, 6, 7]]), array([[ 8,  9, 10, 11],
        [12, 13, 14, 15]])]</code></pre><p><code>np.hsplit()</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.hsplit(grid, [<span class="number">2</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[array([[ 0,  1],
        [ 4,  5],
        [ 8,  9],
        [12, 13]]), array([[ 2,  3],
        [ 6,  7],
        [10, 11],
        [14, 15]])]</code></pre><p><code>np.dsplit()</code></p>
<ul>
<li>数组沿着第三个维度分裂<h3 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h3></li>
</ul>
<ul>
<li>向量操作<ul>
<li>通过简单地对数组执行操作来实现，这里对数组的操作将会被用于数组中的每一个元素</li>
</ul>
</li>
</ul>
<h4 id="数组的运算"><a href="#数组的运算" class="headerlink" title="数组的运算"></a>数组的运算</h4><table>
<thead>
<tr>
<th align="right">运算符</th>
<th align="right">通用函数</th>
<th align="right">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="right">+</td>
<td align="right">np.add</td>
<td align="right">加法</td>
</tr>
<tr>
<td align="right">-</td>
<td align="right">np.subtract</td>
<td align="right">减法</td>
</tr>
<tr>
<td align="right">-</td>
<td align="right">np.negative</td>
<td align="right">负数</td>
</tr>
<tr>
<td align="right">*</td>
<td align="right">np.multiply</td>
<td align="right">乘法</td>
</tr>
<tr>
<td align="right">/</td>
<td align="right">np.divide</td>
<td align="right">除法</td>
</tr>
<tr>
<td align="right">//</td>
<td align="right">np.floor_divide</td>
<td align="right">地板除/求整数</td>
</tr>
<tr>
<td align="right">**</td>
<td align="right">np.power</td>
<td align="right">指数运算</td>
</tr>
<tr>
<td align="right">%</td>
<td align="right">np.mod</td>
<td align="right">模/余数</td>
</tr>
</tbody></table>
<h4 id="绝对值"><a href="#绝对值" class="headerlink" title="绝对值"></a>绝对值</h4><ul>
<li>可以识别内置abs()函数</li>
<li>对应np.absolute函数</li>
<li>别名np.abs</li>
<li>处理复数时返回复数的幅度<h4 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h4></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 三角函数</span></span><br><span class="line">theta = np.linspace(<span class="number">0</span>, np.pi, <span class="number">3</span>)</span><br><span class="line">print(<span class="string">'theta      = '</span>, theta)</span><br><span class="line">print(<span class="string">'sin(theta) = '</span>, np.sin(theta))</span><br><span class="line">print(<span class="string">'cos(theta) = '</span>, np.cos(theta))</span><br><span class="line">print(<span class="string">'tan(theta) = '</span>, np.tan(theta))</span><br></pre></td></tr></table></figure>

<pre><code>theta      =  [0.         1.57079633 3.14159265]
sin(theta) =  [0.0000000e+00 1.0000000e+00 1.2246468e-16]
cos(theta) =  [ 1.000000e+00  6.123234e-17 -1.000000e+00]
tan(theta) =  [ 0.00000000e+00  1.63312394e+16 -1.22464680e-16]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 反三角函数</span></span><br><span class="line">x = [<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line">print(<span class="string">'x         = '</span>, x)</span><br><span class="line">print(<span class="string">'arcsin(x) = '</span>, np.arcsin(x))</span><br><span class="line">print(<span class="string">'arccos(x) = '</span>, np.arccos(x))</span><br><span class="line">print(<span class="string">'arctan(x) = '</span>, np.arctan(x))</span><br></pre></td></tr></table></figure>

<pre><code>x         =  [-1, 0, 1]
arcsin(x) =  [-1.57079633  0.          1.57079633]
arccos(x) =  [3.14159265 1.57079633 0.        ]
arctan(x) =  [-0.78539816  0.          0.78539816]</code></pre><h4 id="指数和对数"><a href="#指数和对数" class="headerlink" title="指数和对数"></a>指数和对数</h4><ul>
<li>自然数的指数运算：np.exp</li>
<li>2的指数运算：np.exp2</li>
<li>自定义的指数运算：np.power</li>
<li>自然数为底的对数运算：np.log</li>
<li>2为底的对数运算：np.log2</li>
<li>10为底的对数运算：np.log10</li>
<li>以任意数为底的对数运算：np.log(m)/np.log(n)<ul>
<li>m 为底数</li>
<li>n 为真数</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指数运算</span></span><br><span class="line">x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">print(<span class="string">'x    ='</span>, x)</span><br><span class="line">print(<span class="string">'e^x  ='</span>, np.exp(x))</span><br><span class="line">print(<span class="string">'2^x  ='</span>, np.exp2(x))</span><br><span class="line">print(<span class="string">'3^x  ='</span>, np.power(<span class="number">3</span>, x))</span><br></pre></td></tr></table></figure>

<pre><code>x    = [1, 2, 3, 4]
e^x  = [ 2.71828183  7.3890561  20.08553692 54.59815003]
2^x  = [ 2.  4.  8. 16.]
3^x  = [ 3  9 27 81]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对数运算</span></span><br><span class="line">print(<span class="string">'ln(x)    ='</span>, np.log(x))</span><br><span class="line">print(<span class="string">'log2(x)  ='</span>, np.log2(x))</span><br><span class="line">print(<span class="string">'log10(x) ='</span>, np.log10(x))</span><br></pre></td></tr></table></figure>

<pre><code>ln(x)    = [0.         0.69314718 1.09861229 1.38629436]
log2(x)  = [0.        1.        1.5849625 2.       ]
log10(x) = [0.         0.30103    0.47712125 0.60205999]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于非常小的输入值的更好精度计算</span></span><br><span class="line">x = [<span class="number">0</span>, <span class="number">0.001</span>, <span class="number">0.01</span>, <span class="number">0.1</span>]</span><br><span class="line">print(<span class="string">'exp(x) - 1 ='</span>, np.expm1(x))</span><br><span class="line">print(<span class="string">'log(1 + x) ='</span>, np.log1p(x))</span><br></pre></td></tr></table></figure>

<pre><code>exp(x) - 1 = [0.         0.0010005  0.01005017 0.10517092]
log(1 + x) = [0.         0.0009995  0.00995033 0.09531018]</code></pre><ul>
<li>logaddexp(a, b)，在计算log(exp(a) + exp(b)) 更准确</li>
</ul>
<h3 id="高级的通用函数特性"><a href="#高级的通用函数特性" class="headerlink" title="高级的通用函数特性"></a>高级的通用函数特性</h3><h4 id="指定输出"><a href="#指定输出" class="headerlink" title="指定输出"></a>指定输出</h4><ul>
<li>在进行大量运算时，有时候指定一个用于存放运算结果的数组是非常有用的。不同于创建临时数组，你可以用这个特性将计算结果直接写入到你期望的存储位置。所有的通用函数都可以通过 out 参数来指定计算结果的存放位置</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定计算结果的存放位置</span></span><br><span class="line">x = np.arange(<span class="number">5</span>)</span><br><span class="line">y = np.empty(<span class="number">5</span>)</span><br><span class="line">np.multiply(x, <span class="number">10</span>, out = y)</span><br><span class="line">print(y)</span><br></pre></td></tr></table></figure>

<pre><code>[ 0. 10. 20. 30. 40.]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写入指定数组的每隔一个元素的位置</span></span><br><span class="line">y = np.zeros(<span class="number">10</span>)</span><br><span class="line">np.power(<span class="number">2</span>, x, out=y[::<span class="number">2</span>])</span><br><span class="line">print(y)</span><br></pre></td></tr></table></figure>

<pre><code>[ 1.  0.  2.  0.  4.  0.  8.  0. 16.  0.]</code></pre><h4 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h4><ul>
<li>reduce：望用一个特定的运算 reduce 一个数组，那么可以用任何通用函数的 reduce 方法。一个 reduce 方法会对给定的元素和操作重复执行，直至得到单个的结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(<span class="number">1</span>, <span class="number">6</span>)</span><br><span class="line">y = np.add.reduce(x)</span><br><span class="line">print(y)</span><br><span class="line">z = np.multiply.reduce(x)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure>

<pre><code>15
120</code></pre><ul>
<li>accumulate: 存储每次计算的中间结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">y = np.add.accumulate(x)</span><br><span class="line">print(y)</span><br><span class="line">z = np.multiply.accumulate(x)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure>

<pre><code>[ 1  3  6 10 15]
[  1   2   6  24 120]</code></pre><ul>
<li>在一些特殊情况中，NumPy 提供了专用的函数（np.sum、np.prod、np.cumsum、np.cumprod ），它们也可以实现以上 reduce 的功能<h4 id="外积"><a href="#外积" class="headerlink" title="外积"></a>外积</h4></li>
<li>任何通用函数都可以用 outer 方法获得两个不同输入数组所有元素对的函数运算结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">y = np.multiply.outer(x, x)</span><br><span class="line">print(y)</span><br><span class="line">z = np.add.outer(x, x)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure>

<pre><code>[[ 1  2  3  4  5]
 [ 2  4  6  8 10]
 [ 3  6  9 12 15]
 [ 4  8 12 16 20]
 [ 5 10 15 20 25]]
[[ 2  3  4  5  6]
 [ 3  4  5  6  7]
 [ 4  5  6  7  8]
 [ 5  6  7  8  9]
 [ 6  7  8  9 10]]</code></pre><h3 id="聚合：最大值、最小值和其他值"><a href="#聚合：最大值、最小值和其他值" class="headerlink" title="聚合：最大值、最小值和其他值"></a>聚合：最大值、最小值和其他值</h3><ul>
<li>求和<ul>
<li>通过np.sum实现</li>
<li>array.sum()可便捷调用</li>
</ul>
</li>
<li>最大值<ul>
<li>通过np.min实现</li>
<li>array.min()可便捷调用</li>
</ul>
</li>
<li>最小值<ul>
<li>通过np.max实现</li>
<li>array.max()可便捷调用</li>
</ul>
</li>
</ul>
<h4 id="1-多维度聚合"><a href="#1-多维度聚合" class="headerlink" title="1. 多维度聚合"></a>1. 多维度聚合</h4><pre><code>通过指定axis用于沿着某个轴的方向进行聚合。
    * axis = 0 表示每一列，即第一个轴被折叠
    * axis = 1 表示每一行，即第二个轴被折叠</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">M = np.random.random((<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">print(M)</span><br><span class="line">print(M.sum())</span><br><span class="line">print(M.min(axis=<span class="number">0</span>))</span><br><span class="line">print(M.max(axis=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[[0.36178866 0.22826323 0.29371405 0.63097612]
 [0.09210494 0.43370117 0.43086276 0.4936851 ]
 [0.42583029 0.31226122 0.42635131 0.89338916]]
5.022928013697376
[0.09210494 0.22826323 0.29371405 0.4936851 ]
[0.63097612 0.4936851  0.89338916]</code></pre><h4 id="2-其他聚合函数"><a href="#2-其他聚合函数" class="headerlink" title="2. 其他聚合函数"></a>2. 其他聚合函数</h4><ul>
<li>大多数的聚合都有对 NaN 值的安全处理策略（NaN-safe），即计算时忽略所有的缺失值，这些缺失值即特殊的 IEEE 浮点型 NaN 值<br></li>
</ul>
<table>
<thead>
<tr>
<th align="left">函数名称</th>
<th align="left">NaN安全版本</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">np.sum</td>
<td align="left">np.nansum</td>
<td align="left">计算元素的和</td>
</tr>
<tr>
<td align="left">np.prod</td>
<td align="left">np.nanprod</td>
<td align="left">计算元素的积</td>
</tr>
<tr>
<td align="left">np.mean</td>
<td align="left">np.nanmean</td>
<td align="left">计算元素的平均值</td>
</tr>
<tr>
<td align="left">np.std</td>
<td align="left">np.nanstd</td>
<td align="left">计算元素的标准差</td>
</tr>
<tr>
<td align="left">np.var</td>
<td align="left">np.nanvar</td>
<td align="left">计算元素的方差</td>
</tr>
<tr>
<td align="left">np.min</td>
<td align="left">np.nanmin</td>
<td align="left">找出最小值</td>
</tr>
<tr>
<td align="left">np.max</td>
<td align="left">np.nanmax</td>
<td align="left">找出最大值</td>
</tr>
<tr>
<td align="left">np.argmin</td>
<td align="left">np.nanargmin</td>
<td align="left">找出最小值的索引</td>
</tr>
<tr>
<td align="left">np.argmax</td>
<td align="left">np.nanargmax</td>
<td align="left">找出最大值的索引</td>
</tr>
<tr>
<td align="left">np.median</td>
<td align="left">np.nanmedian</td>
<td align="left">计算元素的中位数</td>
</tr>
<tr>
<td align="left">np.percentile</td>
<td align="left">np.nanpercentile</td>
<td align="left">计算基于元素排序的统计值</td>
</tr>
<tr>
<td align="left">np.any</td>
<td align="left">N/A</td>
<td align="left">验证任何一个元素是否为真</td>
</tr>
<tr>
<td align="left">np.all</td>
<td align="left">N/A</td>
<td align="left">验证所有元素是否为真</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">heights = np.random.random(<span class="number">25</span>) * <span class="number">175</span></span><br><span class="line">print(heights)</span><br><span class="line">print(<span class="string">"Mean height: "</span>, heights.mean())</span><br><span class="line">print(<span class="string">"Standard deviation:"</span>, heights.std())</span><br><span class="line">print(<span class="string">"Minimum height: "</span>, heights.min())</span><br><span class="line">print(<span class="string">"Maximum height: "</span>, heights.max())</span><br><span class="line">print(<span class="string">"25th percentile: "</span>, np.percentile(heights, <span class="number">25</span>))</span><br><span class="line">print(<span class="string">"Median: "</span>, np.median(heights))</span><br><span class="line">print(<span class="string">"75th percentile: "</span>, np.percentile(heights, <span class="number">75</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[165.22800319  87.82141828 109.19176656  20.23321914  55.52495932
  72.59458709 151.60410263  43.82968894  84.53099625 172.47296248
  90.90989587 107.25654201  21.11001655 144.60964009 105.53552247
  95.38690113  59.98367091  53.22113808  72.97888693 119.22763401
 153.20494731  89.32390906 117.12991202 102.5388967  109.35811287]
Mean height:  96.19229319557513
Standard deviation: 40.570450297029936
Minimum height:  20.233219138876752
Maximum height:  172.47296248187337
25th percentile:  72.59458709188556
Median:  95.38690113163136
75th percentile:  117.12991201839765</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn; seaborn.set()</span><br><span class="line"></span><br><span class="line">plt.hist(heights)</span><br><span class="line">plt.title(<span class="string">'Height Distribution of US Presidents'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'height (cm)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'number'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/26/python-numpy学习笔记/output_85_0.png" alt="png"></p>
<h3 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h3><ul>
<li>广播允许这些二进制操作用于不同大小的数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">a + <span class="number">5</span></span><br></pre></td></tr></table></figure>

<pre><code>array([6, 7, 8])</code></pre><ul>
<li>可以认为这个操作是将数值5扩展或重复至数组<code>[5, 5, 5]</code>，然后执行加法</li>
<li>下面这个例子，一维数组为扩展或广播了，它沿着第二个维度扩展，扩展到匹配M数组的形状</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">M = np.ones((<span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line">M + a</span><br></pre></td></tr></table></figure>

<pre><code>array([[2., 3., 4.],
       [2., 3., 4.],
       [2., 3., 4.]])</code></pre><ul>
<li>对两个数组同时广播，将 a 和b 都进行了扩展来匹配一个公共的形状，最终的结果是一个二维数组,例子如下：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">3</span>)</span><br><span class="line">b = np.arange(<span class="number">3</span>)[:, np.newaxis]</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">a + b</span><br></pre></td></tr></table></figure>

<pre><code>[0 1 2]
[[0]
 [1]
 [2]]





array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4]])</code></pre><h4 id="广播的规则"><a href="#广播的规则" class="headerlink" title="广播的规则"></a>广播的规则</h4><ul>
<li>如果两个数组的维度数不相同，那么小维度数组的形状将会在最左边补 1</li>
<li>如果两个数组的形状在任何一个维度上都不匹配，那么数组的形状会沿着维度为 1 的维度扩展以匹配另外一个数组的形状</li>
<li>如果两个数组的形状在任何一个维度上都不匹配并且没有任何一个维度等于 1，那么会引发异常</li>
</ul>
<h5 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h5><ul>
<li>一个二维数组与一个一维数组相加：<blockquote>
<p>M = np.ones((2, 3))<br>a = np.arange(3)  </p>
</blockquote>
</li>
<li>形状如下<blockquote>
<p>M.shape = (2, 3)<br>a.shape = (3,)  </p>
</blockquote>
</li>
<li>可以看到，根据规则1，数组a的维度数更小，所以在其左边补1<blockquote>
<p>M.shape -&gt; (2, 3)<br>a.shape -&gt; (1, 3)  </p>
</blockquote>
</li>
<li>根据规则2，第一个维度不匹配，因此扩展这个维度以匹配数组<blockquote>
<p>M.shape -&gt; (2, 3)<br>a.shape -&gt; (2, 3)  </p>
</blockquote>
</li>
<li>现在两个数组的形状匹配了，可以看到它们的最终形状都为(2, 3)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M = np.ones((<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">a = np.arange(<span class="number">3</span>)</span><br><span class="line">M + a</span><br></pre></td></tr></table></figure>

<pre><code>array([[1., 2., 3.],
       [1., 2., 3.]])</code></pre><h5 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h5><ul>
<li>两个数组都需要广播：<blockquote>
<p>M = np.arange(3).reshape((3, 1))<br>a = np.arange(3)  </p>
</blockquote>
</li>
<li>形状如下<blockquote>
<p>M.shape = (3,1)<br>a.shape = (3,)  </p>
</blockquote>
</li>
<li>可以看到，根据规则1，数组a的维度数更小，所以在其左边补1<blockquote>
<p>M.shape -&gt; (3, 1)<br>a.shape -&gt; (1, 3)  </p>
</blockquote>
</li>
<li>根据规则2，需要更新这两个数组的维度来相互匹配<blockquote>
<p>M.shape -&gt; (3, 3)<br>a.shape -&gt; (3, 3)  </p>
</blockquote>
</li>
<li>现在两个数组的形状匹配了，可以看到它们的最终形状都为(3, 3)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M = np.arange(<span class="number">3</span>).reshape((<span class="number">3</span>, <span class="number">1</span>))  </span><br><span class="line">a = np.arange(<span class="number">3</span>) </span><br><span class="line">M + a</span><br></pre></td></tr></table></figure>

<pre><code>array([[0, 1, 2],
       [1, 2, 3],
       [2, 3, 4]])</code></pre><h5 id="示例3"><a href="#示例3" class="headerlink" title="示例3"></a>示例3</h5><ul>
<li>两个数组不兼容：<blockquote>
<p>M = np.ones((3, 2))<br>a = np.arange(3)  </p>
</blockquote>
</li>
<li>形状如下<blockquote>
<p>M.shape = (3, 2)<br>a.shape = (3,)  </p>
</blockquote>
</li>
<li>可以看到，根据规则1，数组a的维度数更小，所以在其左边补1<blockquote>
<p>M.shape -&gt; (3, 2)<br>a.shape -&gt; (1, 3)  </p>
</blockquote>
</li>
<li>根据规则2，第一个维度不匹配，因此扩展这个维度以匹配数组<blockquote>
<p>M.shape -&gt; (3, 2)<br>a.shape -&gt; (3, 3)  </p>
</blockquote>
</li>
<li>现在需要用到规则 3——最终的形状还是不匹配，因此这两个数组是不兼容的</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M = np.ones((<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line">a = np.arange(<span class="number">3</span>) </span><br><span class="line">M + a</span><br></pre></td></tr></table></figure>

<pre><code>---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-64-932af115d5e2&gt; in &lt;module&gt;
      1 M = np.ones((3,2))
      2 a = np.arange(3)
----&gt; 3 M + a


ValueError: operands could not be broadcast together with shapes (3,2) (3,) </code></pre><h4 id="广播的应用"><a href="#广播的应用" class="headerlink" title="广播的应用"></a>广播的应用</h4><h5 id="数据的归一化"><a href="#数据的归一化" class="headerlink" title="数据的归一化"></a>数据的归一化</h5><ul>
<li>假设有一个有10个观察值的数组，每个观察值包含3个数值<blockquote>
<p>X = np.random.random((10, 3))  </p>
</blockquote>
</li>
<li>计算每个特征的均值<blockquote>
<p>Xmean = X.mean(0)  </p>
</blockquote>
</li>
<li>归一化操作<blockquote>
<p>X_centered = X - Xmean  </p>
</blockquote>
</li>
</ul>
<h5 id="画一个二维数组"><a href="#画一个二维数组" class="headerlink" title="画一个二维数组"></a>画一个二维数组</h5><ul>
<li>广播另外一个非常有用的地方在于，它能基于二维函数显示图像。我们希望定义一个函数 z = f (x, y)，可以用广播沿着数值区间计算该函数<blockquote>
<p>x = np.linspace(0, 5, 50)<br>y = np.linspace(0, 5, 50)[:, np.newaxis]<br>z = np.sin(x) ** 10 + np.cos(10 + y * x) * np.cos(x)</p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">50</span>)  </span><br><span class="line">y = np.linspace(<span class="number">0</span>, <span class="number">5</span>, <span class="number">50</span>)[:, np.newaxis]  </span><br><span class="line">z = np.sin(x) ** <span class="number">10</span> + np.cos(<span class="number">10</span> + y * x) * np.cos(x)</span><br><span class="line"></span><br><span class="line">plt.imshow(z, origin=<span class="string">'lower'</span>, extent=[<span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">5</span>], cmap=<span class="string">'viridis'</span>)</span><br><span class="line">plt.colorbar()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;matplotlib.colorbar.Colorbar at 0x1409baa39b0&gt;</code></pre><p><img src="/2019/07/26/python-numpy学习笔记/output_99_1.png" alt="png"></p>
<h3 id="比较、掩码和布尔逻辑"><a href="#比较、掩码和布尔逻辑" class="headerlink" title="比较、掩码和布尔逻辑"></a>比较、掩码和布尔逻辑</h3><h4 id="比较操作"><a href="#比较操作" class="headerlink" title="比较操作"></a>比较操作</h4><ul>
<li>数组的逐元素操作,结果是一个布尔数据类型的数组  </li>
</ul>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">对应通用函数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">==</td>
<td align="left">np.equal</td>
<td align="left">等于</td>
</tr>
<tr>
<td align="left">!=</td>
<td align="left">np.not_equal</td>
<td align="left">不等于</td>
</tr>
<tr>
<td align="left">&lt;</td>
<td align="left">np.less</td>
<td align="left">小于</td>
</tr>
<tr>
<td align="left">&lt;=</td>
<td align="left">np.less_equal</td>
<td align="left">小于等于</td>
</tr>
<tr>
<td align="left"><code>&gt;</code></td>
<td align="left">np.greater</td>
<td align="left">大于</td>
</tr>
<tr>
<td align="left"><code>&gt;=</code></td>
<td align="left">np.greater_equal</td>
<td align="left">大于等于</td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 逐元素比较</span></span><br><span class="line">x = np.array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br><span class="line">print(x &lt; <span class="number">3</span>)</span><br><span class="line">print(x &gt; <span class="number">3</span>)</span><br><span class="line">print(x &lt;= <span class="number">3</span>)</span><br><span class="line">print(x &gt;= <span class="number">3</span>)</span><br><span class="line">print(x != <span class="number">3</span>)</span><br><span class="line">print(x == <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 符合表达式实现两个数组的逐元素比较</span></span><br><span class="line">print((<span class="number">2</span> * x) == (x ** <span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[ True  True False False False]
[False False False  True  True]
[ True  True  True False False]
[False False  True  True  True]
[ True  True False  True  True]
[False False  True False False]
[False  True False False False]</code></pre><h4 id="操作布尔数组"><a href="#操作布尔数组" class="headerlink" title="操作布尔数组"></a>操作布尔数组</h4><ul>
<li><p>统计记录的个数</p>
<blockquote>
<p>np.count_nonzero(x &lt; 6)<br>np.sum(x &lt; 6) # False会被解释成0，True会被解释成1</p>
<ul>
<li>sum的好处是，可以沿着行或列进行</li>
<li>快速检车任意或所有的这些值是否为True<br>np.any(x &gt; 8)<br>np.all(x &lt; 0)  </li>
</ul>
</blockquote>
<ul>
<li>上述两个函数也可以通过指定<code>axis</code>来指定行列</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rng = np.random.RandomState(<span class="number">0</span>)</span><br><span class="line">x = rng.randint(<span class="number">10</span>, size=(<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">print(np.count_nonzero(x &lt; <span class="number">6</span>))</span><br><span class="line">print(np.sum(x &lt; <span class="number">6</span>))</span><br><span class="line">print(np.any(x &gt; <span class="number">7</span>))</span><br><span class="line">print(np.all(x &lt; <span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<pre><code>8
8
True
True</code></pre><ul>
<li>布尔运算符<blockquote>
<p>统计(0.5, 1)之间的数量和<br>np.sum((array &gt; 0.5) &amp; (inches &lt; 1))<br>np.sum(~( (array &lt;= 0.5) | (array &gt;= 1) ))  </p>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">通用函数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&amp;</td>
<td align="left">np.bitwise_and</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">^</td>
<td align="left">np.bitwise_xor</td>
</tr>
<tr>
<td align="left">~</td>
<td align="left">np.bitwise_not</td>
</tr>
</tbody></table>
<h4 id="将布尔数组作为掩码"><a href="#将布尔数组作为掩码" class="headerlink" title="将布尔数组作为掩码"></a>将布尔数组作为掩码</h4><ul>
<li>为了将特定值从数组中选出，可以进行简单的索引，即掩码操作<blockquote>
<p>x[x &lt; 5]  </p>
</blockquote>
</li>
<li>返回的是一个一维数组，它包含了所有满足条件的值。换句话说，所有的这些值是掩码数组对应位置为 True 的值。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例子</span></span><br><span class="line">inches = np.random.random(<span class="number">365</span>)*<span class="number">10</span></span><br><span class="line">rainy = (inches &gt; <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 构建一个包含整个夏季日期的掩码（6月21日是第172天）</span></span><br><span class="line">summer = (np.arange(<span class="number">365</span>) - <span class="number">172</span> &lt; <span class="number">90</span>) &amp; (np.arange(<span class="number">365</span>) - <span class="number">172</span> &gt; <span class="number">0</span>)</span><br><span class="line">print(<span class="string">"Median precip on rainy days in 2014 (inches): "</span>,</span><br><span class="line">np.median(inches[rainy]))</span><br><span class="line">print(<span class="string">"Median precip on summer days in 2014 (inches): "</span>,</span><br><span class="line">np.median(inches[summer]))</span><br><span class="line">print(<span class="string">"Maximum precip on summer days in 2014 (inches): "</span>,</span><br><span class="line">np.max(inches[summer]))</span><br><span class="line">print(<span class="string">"Median precip on non-summer rainy days (inches):"</span>,</span><br><span class="line">np.median(inches[rainy &amp; ~summer]))</span><br></pre></td></tr></table></figure>

<pre><code>Median precip on rainy days in 2014 (inches):  6.3526921480470175
Median precip on summer days in 2014 (inches):  4.619087615684484
Maximum precip on summer days in 2014 (inches):  9.930332610947918
Median precip on non-summer rainy days (inches): 6.533648713530407</code></pre><ul>
<li><p>and 和 or 判断整个对象是真或假，而 &amp; 和 | 是指每个对象中的比特位  </p>
<ul>
<li>使用 and 或 or 时，就等于让 Python 将这个对象当作整个布尔实体，所有非零的整数都会被当作是 True<blockquote>
<p>bool(-1), bool(0)<br>(True, False)<br>bool(-1 and 0)<br>Flase<br>bool(-1 or 0)<br>True  </p>
</blockquote>
</li>
<li>对整数使用 &amp; 和 | 时，表达式操作的是元素的比特，将 and 或 or 应用于组成该数字的每个比特<blockquote>
<p>bin(42)<br>‘0b101010’<br>bin(59)<br>‘0b111011’<br>bin(42 &amp; 59)<br>‘0b101010’<br>bin(42 | 59)<br>‘0b111011’  </p>
</blockquote>
</li>
</ul>
</li>
<li><p>NumPy 中有一个布尔数组时，该数组可以被当作是由比特字符组成的，其中 1 = True、0 = False。这样的数组可以用上面介绍的方式进行 &amp; 和 | 的操作：</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A = np.array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], dtype=bool)</span><br><span class="line">B = np.array([<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>], dtype=bool)</span><br><span class="line">A | B</span><br></pre></td></tr></table></figure>

<pre><code>array([ True,  True,  True, False,  True,  True])</code></pre><ul>
<li>而用 or 来计算这两个数组时，Python 会计算整个数组对象的真或假，这会导致程序出错</li>
<li>同样，对给定数组进行逻辑运算时，你也应该使用 | 或 &amp;，而不是 or 或 and</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line">(x &gt; <span class="number">4</span>) &amp; (x &lt; <span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([False, False, False, False, False,  True,  True,  True, False,
       False])</code></pre><h3 id="花哨的索引"><a href="#花哨的索引" class="headerlink" title="花哨的索引"></a>花哨的索引</h3><h4 id="探索花哨的索引"><a href="#探索花哨的索引" class="headerlink" title="探索花哨的索引"></a>探索花哨的索引</h4><ul>
<li>概念，传递一个索引数组来一次性获得多个数组元素</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rand = np.random.RandomState(<span class="number">30</span>)</span><br><span class="line">x = rand.randint(<span class="number">100</span>, size = <span class="number">10</span>)</span><br><span class="line"><span class="comment"># 传递索引的列表或数组来获取结果</span></span><br><span class="line">ind = [<span class="number">3</span>, <span class="number">7</span>, <span class="number">4</span>]</span><br><span class="line">x[ind]</span><br></pre></td></tr></table></figure>

<pre><code>array([45, 53, 12])</code></pre><ul>
<li>结果的形状与索引数组的形状一致，而不是与被索引的数组形状一致</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ind = np.array([[<span class="number">3</span>, <span class="number">7</span>], [<span class="number">4</span>, <span class="number">5</span>]])</span><br><span class="line">x[ind]</span><br></pre></td></tr></table></figure>

<pre><code>array([[45, 53],
       [12, 23]])</code></pre><ul>
<li>对于多个维度的索引，和标准索引一样，第一个索引指的是行，第二个索引指的是列</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">X = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line">row = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">col = np.array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line">X[row, col]</span><br></pre></td></tr></table></figure>

<pre><code>array([ 2,  5, 11])</code></pre><ul>
<li>索引值的配对遵循广播的规则</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X[row[:, np.newaxis], col]</span><br></pre></td></tr></table></figure>

<pre><code>array([[ 2,  1,  3],
       [ 6,  5,  7],
       [10,  9, 11]])</code></pre><h4 id="组合索引"><a href="#组合索引" class="headerlink" title="组合索引"></a>组合索引</h4><ul>
<li>花哨索引与其他索引方案结合使用<blockquote>
<p>花哨索引和简单的索引组合使用</p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X[<span class="number">2</span>, [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br></pre></td></tr></table></figure>

<pre><code>array([10,  8,  9])</code></pre><blockquote>
<p>花哨索引和切片组合</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X[<span class="number">1</span>:, [<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br></pre></td></tr></table></figure>

<pre><code>array([[ 6,  4,  5],
       [10,  8,  9]])</code></pre><blockquote>
<p>花哨索引和掩码组合使用</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mask = np.array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>], dtype=bool)</span><br><span class="line">X[row[:, np.newaxis], mask]</span><br></pre></td></tr></table></figure>

<pre><code>array([[ 0,  2],
       [ 4,  6],
       [ 8, 10]])</code></pre><h4 id="示例：选择随机点"><a href="#示例：选择随机点" class="headerlink" title="示例：选择随机点"></a>示例：选择随机点</h4><ul>
<li>有一个 N×D 的矩阵，表示在 D 个维度的 N 个点</li>
<li>利用花哨的索引随机选取 20 个点——选择 20 个随机的、不重复的索引值，并利用这些索引值选取到原始数组对应的值</li>
<li>通常用于快速分割数据，即需要分割训练 / 测试数据集以验证统计模型时，以及在解答统计问题时的抽样方法中使用</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 构建数组</span></span><br><span class="line">mean = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">cov = [[<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">      [<span class="number">2</span>, <span class="number">5</span>]]</span><br><span class="line">X = rand.multivariate_normal(mean, cov, <span class="number">100</span>)</span><br><span class="line">X.shape</span><br></pre></td></tr></table></figure>

<pre><code>(100, 2)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘画</span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/26/python-numpy学习笔记/output_126_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#选取随机点</span></span><br><span class="line">indices = np.random.choice(X.shape[<span class="number">0</span>], <span class="number">20</span>, replace=<span class="literal">False</span>)</span><br><span class="line">selection = X[indices]</span><br><span class="line">selection.shape</span><br></pre></td></tr></table></figure>

<pre><code>(20, 2)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 画图</span></span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], alpha=<span class="number">0.3</span>)</span><br><span class="line">plt.scatter(selection[:, <span class="number">0</span>], selection[:, <span class="number">1</span>],</span><br><span class="line">            facecolor=<span class="string">'none'</span>, edgecolor=<span class="string">'b'</span>, s=<span class="number">200</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/26/python-numpy学习笔记/output_128_0.png" alt="png"></p>
<h4 id="用花哨索引修改值"><a href="#用花哨索引修改值" class="headerlink" title="用花哨索引修改值"></a>用花哨索引修改值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line">i = np.array([<span class="number">2</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">4</span>])</span><br><span class="line">x[i] = <span class="number">99</span></span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[ 0 99 99  3 99  5  6  7 99  9]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x[i] -= <span class="number">10</span></span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[ 0 89 89  3 89  5  6  7 89  9]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不会累加</span></span><br><span class="line">x = np.zeros(<span class="number">10</span>)</span><br><span class="line">i = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line">x[i] += <span class="number">1</span></span><br><span class="line">x</span><br></pre></td></tr></table></figure>

<pre><code>array([0., 0., 1., 1., 1., 0., 0., 0., 0., 0.])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 累加</span></span><br><span class="line">x = np.zeros(<span class="number">10</span>)</span><br><span class="line">np.add.at(x, i, <span class="number">1</span>)</span><br><span class="line">x</span><br></pre></td></tr></table></figure>

<pre><code>array([0., 0., 1., 2., 3., 0., 0., 0., 0., 0.])</code></pre><h4 id="示例：数据区间划分"><a href="#示例：数据区间划分" class="headerlink" title="示例：数据区间划分"></a>示例：数据区间划分</h4><ul>
<li>创建一个数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.random.seed(<span class="number">42</span>)</span><br><span class="line">x = np.random.randn(<span class="number">100</span>)</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[ 0.49671415 -0.1382643   0.64768854  1.52302986 -0.23415337 -0.23413696
  1.57921282  0.76743473 -0.46947439  0.54256004 -0.46341769 -0.46572975
  0.24196227 -1.91328024 -1.72491783 -0.56228753 -1.01283112  0.31424733
 -0.90802408 -1.4123037   1.46564877 -0.2257763   0.0675282  -1.42474819
 -0.54438272  0.11092259 -1.15099358  0.37569802 -0.60063869 -0.29169375
 -0.60170661  1.85227818 -0.01349722 -1.05771093  0.82254491 -1.22084365
  0.2088636  -1.95967012 -1.32818605  0.19686124  0.73846658  0.17136828
 -0.11564828 -0.3011037  -1.47852199 -0.71984421 -0.46063877  1.05712223
  0.34361829 -1.76304016  0.32408397 -0.38508228 -0.676922    0.61167629
  1.03099952  0.93128012 -0.83921752 -0.30921238  0.33126343  0.97554513
 -0.47917424 -0.18565898 -1.10633497 -1.19620662  0.81252582  1.35624003
 -0.07201012  1.0035329   0.36163603 -0.64511975  0.36139561  1.53803657
 -0.03582604  1.56464366 -2.6197451   0.8219025   0.08704707 -0.29900735
  0.09176078 -1.98756891 -0.21967189  0.35711257  1.47789404 -0.51827022
 -0.8084936  -0.50175704  0.91540212  0.32875111 -0.5297602   0.51326743
  0.09707755  0.96864499 -0.70205309 -0.32766215 -0.39210815 -1.46351495
  0.29612028  0.26105527  0.00511346 -0.23458713]</code></pre><ul>
<li>手动计算直方图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bins = np.linspace(<span class="number">-5</span>, <span class="number">5</span>, <span class="number">20</span>)</span><br><span class="line">counts = np.zeros_like(bins)</span><br><span class="line">print(bins)</span><br><span class="line">print(counts)</span><br></pre></td></tr></table></figure>

<pre><code>[-5.         -4.47368421 -3.94736842 -3.42105263 -2.89473684 -2.36842105
 -1.84210526 -1.31578947 -0.78947368 -0.26315789  0.26315789  0.78947368
  1.31578947  1.84210526  2.36842105  2.89473684  3.42105263  3.94736842
  4.47368421  5.        ]
[0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.]</code></pre><ul>
<li>为每个x找到合适的区间</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i = np.searchsorted(bins, x)</span><br><span class="line">print(i)</span><br></pre></td></tr></table></figure>

<pre><code>[11 10 11 13 10 10 13 11  9 11  9  9 10  6  7  9  8 11  8  7 13 10 10  7
  9 10  8 11  9  9  9 14 10  8 12  8 10  6  7 10 11 10 10  9  7  9  9 12
 11  7 11  9  9 11 12 12  8  9 11 12  9 10  8  8 12 13 10 12 11  9 11 13
 10 13  5 12 10  9 10  6 10 11 13  9  8  9 12 11  9 11 10 12  9  9  9  7
 11 10 10 10]</code></pre><ul>
<li>为每个区间加上1</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.add.at(counts, i, <span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>计数数组 counts 反映的是在每个区间中的点的个数，即直方图分布</li>
<li>画出结果</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(bins, counts, linestyle=<span class="string">'steps'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>[&lt;matplotlib.lines.Line2D at 0x1409bbe1710&gt;]</code></pre><p><img src="/2019/07/26/python-numpy学习笔记/output_143_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 上述结果的另一种实现方法</span></span><br><span class="line">plt.hist(x, bins, histtype=<span class="string">'step'</span>);</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/26/python-numpy学习笔记/output_144_0.png" alt="png"></p>
<h3 id="数组的排序"><a href="#数组的排序" class="headerlink" title="数组的排序"></a>数组的排序</h3><h4 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h4><ul>
<li>np.sort<blockquote>
<p>不修改原始输入数组的基础上返回一个排好序的数组  </p>
</blockquote>
</li>
<li>sort方法<blockquote>
<p>用排序号的数组替代原始数组  </p>
</blockquote>
</li>
<li>np.argsort<blockquote>
<p>返回原始数据排好序的索引值</p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">1</span>])</span><br><span class="line">np.sort(x)</span><br></pre></td></tr></table></figure>

<pre><code>array([1, 2, 3, 5, 7, 8])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x.sort()</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure>

<pre><code>[1 2 3 5 7 8]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">1</span>])</span><br><span class="line">np.argsort(x)</span><br></pre></td></tr></table></figure>

<pre><code>array([5, 2, 0, 1, 3, 4], dtype=int64)</code></pre><ul>
<li>按行或列排序，使用axis参数<blockquote>
<p>axis=0，按列排序<br>axis=1，按行排序</p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rand = np.random.RandomState(<span class="number">42</span>)</span><br><span class="line">X = rand.randint(<span class="number">0</span>, <span class="number">10</span>, (<span class="number">4</span>, <span class="number">6</span>))</span><br><span class="line">print(X)</span><br><span class="line">print(np.sort(X, axis=<span class="number">0</span>))</span><br><span class="line">print(np.sort(X, axis=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[[6 3 7 4 6 9]
 [2 6 7 4 3 7]
 [7 2 5 4 1 7]
 [5 1 4 0 9 5]]
[[2 1 4 0 1 5]
 [5 2 5 4 3 7]
 [6 3 7 4 6 7]
 [7 6 7 4 9 9]]
[[3 4 6 6 7 9]
 [2 3 4 6 7 7]
 [1 2 4 5 7 7]
 [0 1 4 5 5 9]]</code></pre><h4 id="部分排序：分隔"><a href="#部分排序：分隔" class="headerlink" title="部分排序：分隔"></a>部分排序：分隔</h4><ul>
<li>np.partition<blockquote>
<p>输入数组和数字K<br>输出是一个新数组，左边是第K小的值，右边是任意排序的其他值。两个分隔的区域中，元素都是任意排序  </p>
</blockquote>
</li>
<li>np.argpartition<blockquote>
<p>计算分隔的索引值</p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([<span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">8</span>])</span><br><span class="line">np.partition(x, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([3, 1, 2, 4, 7, 5, 8, 9])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 沿着多维数组的任意轴分隔</span></span><br><span class="line">np.partition(X, <span class="number">2</span>, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<pre><code>array([[3, 4, 6, 7, 6, 9],
       [2, 3, 4, 7, 6, 7],
       [1, 2, 4, 5, 7, 7],
       [0, 1, 4, 5, 9, 5]])</code></pre><h4 id="示例：K个最近邻"><a href="#示例：K个最近邻" class="headerlink" title="示例：K个最近邻"></a>示例：K个最近邻</h4><ul>
<li>利用 argsort 函数沿着多个轴快速找到集合中每个点的最近邻</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在二维平面上创建一个有10个随机点的集合</span></span><br><span class="line">X = rand.rand(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], s=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>

<pre><code>&lt;matplotlib.collections.PathCollection at 0x1409bc845c0&gt;</code></pre><p><img src="/2019/07/26/python-numpy学习笔记/output_155_1.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算两两数据点对间的距离</span></span><br><span class="line">dist_sq = np.sum((X[:,np.newaxis,:] - X[np.newaxis,:,:]) ** <span class="number">2</span>, axis=<span class="number">-1</span>)</span><br><span class="line">nearest = np.argsort(dist_sq, axis=<span class="number">1</span>)</span><br><span class="line">K = <span class="number">2</span></span><br><span class="line">nearest_partition = np.argpartition(dist_sq, K + <span class="number">1</span>, axis=<span class="number">1</span>)</span><br><span class="line">plt.scatter(X[:, <span class="number">0</span>], X[:, <span class="number">1</span>], s=<span class="number">100</span>)</span><br><span class="line"><span class="comment"># 将每个点与它的两个最近邻连接</span></span><br><span class="line">K = <span class="number">2</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(X.shape[<span class="number">0</span>]):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> nearest_partition[i, :K+<span class="number">1</span>]:</span><br><span class="line">        <span class="comment"># 画一条从X[i]到X[j]的线段</span></span><br><span class="line">        <span class="comment"># 用zip方法实现：</span></span><br><span class="line">        plt.plot(*zip(X[j], X[i]), color=<span class="string">'black'</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/2019/07/26/python-numpy学习笔记/output_156_0.png" alt="png"></p>
<h3 id="结构化数据"><a href="#结构化数据" class="headerlink" title="结构化数据"></a>结构化数据</h3><ul>
<li>指定复合数据类型，构造一个结构化数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = np.zeros(<span class="number">4</span>, dtype=int)</span><br><span class="line"><span class="comment"># 使用复合数据结构的结构化数组</span></span><br><span class="line">data = np.zeros(<span class="number">4</span>, dtype=&#123;<span class="string">'names'</span>:(<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'weight'</span>),</span><br><span class="line">                         <span class="string">'formats'</span>:(<span class="string">'U10'</span>, <span class="string">'i4'</span>, <span class="string">'f8'</span>)&#125;)</span><br><span class="line"><span class="comment"># U10表示‘长度不超过10的Unicode字符串’</span></span><br><span class="line"><span class="comment"># i4表示‘4字节（32比特）整型’</span></span><br><span class="line"><span class="comment"># f8表示‘8字节（64比特位）浮点型’</span></span><br><span class="line">print(data.dtype)</span><br></pre></td></tr></table></figure>

<pre><code>[(&apos;name&apos;, &apos;&lt;U10&apos;), (&apos;age&apos;, &apos;&lt;i4&apos;), (&apos;weight&apos;, &apos;&lt;f8&apos;)]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">name = [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Cathy'</span>, <span class="string">'Doug'</span>]</span><br><span class="line">age = [<span class="number">25</span>, <span class="number">45</span>, <span class="number">37</span>, <span class="number">19</span>]</span><br><span class="line">weight = [<span class="number">55.0</span>, <span class="number">85.5</span>, <span class="number">68.0</span>, <span class="number">61.5</span>]</span><br><span class="line">data[<span class="string">'name'</span>] = name</span><br><span class="line">data[<span class="string">'age'</span>] = age</span><br><span class="line">data[<span class="string">'weight'</span>] = weight</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<pre><code>[(&apos;Alice&apos;, 25, 55. ) (&apos;Bob&apos;, 45, 85.5) (&apos;Cathy&apos;, 37, 68. )
 (&apos;Doug&apos;, 19, 61.5)]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取所有名字</span></span><br><span class="line">data[<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure>

<pre><code>array([&apos;Alice&apos;, &apos;Bob&apos;, &apos;Cathy&apos;, &apos;Doug&apos;], dtype=&apos;&lt;U10&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取数据第一行</span></span><br><span class="line">data[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<pre><code>(&apos;Alice&apos;, 25, 55.)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取最后一行的名字</span></span><br><span class="line">data[<span class="number">-1</span>][<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure>

<pre><code>&apos;Doug&apos;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取年龄小于30岁的人的名字</span></span><br><span class="line">data[data[<span class="string">'age'</span>] &lt; <span class="number">30</span>][<span class="string">'name'</span>]</span><br></pre></td></tr></table></figure>

<pre><code>array([&apos;Alice&apos;, &apos;Doug&apos;], dtype=&apos;&lt;U10&apos;)</code></pre><h4 id="生成结构化数组"><a href="#生成结构化数组" class="headerlink" title="生成结构化数组"></a>生成结构化数组</h4><ul>
<li>字典的方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.dtype(&#123;<span class="string">'names'</span>:(<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'weight'</span>),</span><br><span class="line">         <span class="string">'formats'</span>:(<span class="string">'U10'</span>, <span class="string">'i4'</span>, <span class="string">'f8'</span>)&#125;)</span><br></pre></td></tr></table></figure>

<pre><code>dtype([(&apos;name&apos;, &apos;&lt;U10&apos;), (&apos;age&apos;, &apos;&lt;i4&apos;), (&apos;weight&apos;, &apos;&lt;f8&apos;)])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数值数据类型可以用 Python 类型或 NumPy 的 dtype 类型指定</span></span><br><span class="line">np.dtype(&#123;<span class="string">'names'</span>:(<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'weight'</span>),</span><br><span class="line"><span class="string">'formats'</span>:((np.str_, <span class="number">10</span>), int, np.float32)&#125;)</span><br></pre></td></tr></table></figure>

<pre><code>dtype([(&apos;name&apos;, &apos;&lt;U10&apos;), (&apos;age&apos;, &apos;&lt;i4&apos;), (&apos;weight&apos;, &apos;&lt;f4&apos;)])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 元组列表</span></span><br><span class="line">np.dtype([(<span class="string">'name'</span>, <span class="string">'S10'</span>), (<span class="string">'age'</span>, <span class="string">'i4'</span>), (<span class="string">'weight'</span>, <span class="string">'f8'</span>)])</span><br></pre></td></tr></table></figure>

<pre><code>dtype([(&apos;name&apos;, &apos;S10&apos;), (&apos;age&apos;, &apos;&lt;i4&apos;), (&apos;weight&apos;, &apos;&lt;f8&apos;)])</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不指定类型的名称</span></span><br><span class="line">np.dtype(<span class="string">'S10,i4,f8'</span>)</span><br></pre></td></tr></table></figure>

<pre><code>dtype([(&apos;f0&apos;, &apos;S10&apos;), (&apos;f1&apos;, &apos;&lt;i4&apos;), (&apos;f2&apos;, &apos;&lt;f8&apos;)])</code></pre><ul>
<li><p>简写的字符串格式</p>
<blockquote>
<p>第一个（可选）字符是 &lt; 或者 &gt;，分别表示“低字节序”（little endian）和“高字节序”（bid endian），表示字节（bytes）类型的数据在内存中存放顺序的习惯用法<br>后一个字符指定的是数据的类型：字符、字节、整型、浮点型，等等<br>最后一个字符表示该对象的字节大小  </p>
</blockquote>
</li>
<li><p>NumPy数据类型</p>
<table>
<thead>
<tr>
<th align="left">NumPy数据类型符号</th>
<th align="left">描述</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">‘b’</td>
<td align="left">字节型</td>
<td align="left">np.dtype(‘b’)</td>
</tr>
<tr>
<td align="left">‘i’</td>
<td align="left">有符号整型</td>
<td align="left">np.dtype(‘i4’) == np.int32</td>
</tr>
<tr>
<td align="left">‘u’</td>
<td align="left">无符号整型</td>
<td align="left">np.dtype(‘u1’) == np.uint8</td>
</tr>
<tr>
<td align="left">‘f’</td>
<td align="left">浮点型</td>
<td align="left">np.dtype(‘f8’) == np.int64</td>
</tr>
<tr>
<td align="left">‘c’</td>
<td align="left">复数浮点型</td>
<td align="left">np.dtype(‘c16’) == np.complex128</td>
</tr>
<tr>
<td align="left">‘S’、’a’</td>
<td align="left">字符串</td>
<td align="left">np.dtype(‘S5’)</td>
</tr>
<tr>
<td align="left">‘U’</td>
<td align="left">Unicode 编码字符串</td>
<td align="left">np.dtype(‘U’) == np.str_</td>
</tr>
<tr>
<td align="left">‘V’</td>
<td align="left">原生数据，raw data（空，void）</td>
<td align="left">np.dtype(‘V’) == np.void</td>
</tr>
</tbody></table>
</li>
</ul>
<h4 id="跟高级的复合类型"><a href="#跟高级的复合类型" class="headerlink" title="跟高级的复合类型"></a>跟高级的复合类型</h4><ul>
<li>创建一种类型，其中每个元素都包含一个数组或矩阵</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tp = np.dtype([(<span class="string">'id'</span>, <span class="string">'i8'</span>), (<span class="string">'mat'</span>, <span class="string">'f8'</span>, (<span class="number">3</span>, <span class="number">3</span>))])</span><br><span class="line">X = np.zeros(<span class="number">1</span>, dtype=tp)</span><br><span class="line">print(X[<span class="number">0</span>])</span><br><span class="line">print(X[<span class="string">'mat'</span>][<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<pre><code>(0, [[0., 0., 0.], [0., 0., 0.], [0., 0., 0.]])
[[0. 0. 0.]
 [0. 0. 0.]
 [0. 0. 0.]]</code></pre><h4 id="记录数组：结构化数组的扭转"><a href="#记录数组：结构化数组的扭转" class="headerlink" title="记录数组：结构化数组的扭转"></a>记录数组：结构化数组的扭转</h4><ul>
<li>np.recarray<blockquote>
<p>域可以像属性一样获取，而不是像字典的键那样获取  </p>
</blockquote>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 消耗内存更多</span></span><br><span class="line">data_rec = data.view(np.recarray)</span><br><span class="line">data_rec.age</span><br></pre></td></tr></table></figure>

<pre><code>array([25, 45, 37, 19])</code></pre><h3 id="附：还有一些其他的"><a href="#附：还有一些其他的" class="headerlink" title="附：还有一些其他的"></a>附：还有一些其他的</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#读取数据</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">nd10 = np.random.random([<span class="number">5</span>,<span class="number">7</span>])</span><br><span class="line">np.savetxt(X=nd10,fname=<span class="string">'test1.txt'</span>)</span><br><span class="line">nd11 = np.loadtxt(<span class="string">'test1.txt'</span>)</span><br><span class="line">print(nd10,nd11)</span><br></pre></td></tr></table></figure>

<pre><code>[[0.417411   0.22210781 0.11986537 0.33761517 0.9429097  0.32320293
  0.51879062]
 [0.70301896 0.3636296  0.97178208 0.96244729 0.2517823  0.49724851
  0.30087831]
 [0.28484049 0.03688695 0.60956433 0.50267902 0.05147875 0.27864646
  0.90826589]
 [0.23956189 0.14489487 0.48945276 0.98565045 0.24205527 0.67213555
  0.76161962]
 [0.23763754 0.72821635 0.36778313 0.63230583 0.63352971 0.53577468
  0.09028977]] [[0.417411   0.22210781 0.11986537 0.33761517 0.9429097  0.32320293
  0.51879062]
 [0.70301896 0.3636296  0.97178208 0.96244729 0.2517823  0.49724851
  0.30087831]
 [0.28484049 0.03688695 0.60956433 0.50267902 0.05147875 0.27864646
  0.90826589]
 [0.23956189 0.14489487 0.48945276 0.98565045 0.24205527 0.67213555
  0.76161962]
 [0.23763754 0.72821635 0.36778313 0.63230583 0.63352971 0.53577468
  0.09028977]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#截取数据</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">np.random.seed(<span class="number">2019</span>)</span><br><span class="line">nd12 = np.random.random([<span class="number">10</span>])</span><br><span class="line">print(nd12)</span><br><span class="line">print(nd12[<span class="number">3</span>])</span><br><span class="line">print(nd12[<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line">print(nd12[<span class="number">2</span>:<span class="number">9</span>:<span class="number">2</span>])</span><br><span class="line">print(nd12[::<span class="number">-3</span>])</span><br><span class="line">nd13 = np.arange(<span class="number">25</span>).reshape([<span class="number">5</span>,<span class="number">5</span>])</span><br><span class="line">print(nd13)</span><br><span class="line">print(nd13[<span class="number">1</span>:<span class="number">2</span>,<span class="number">1</span>:<span class="number">4</span>])</span><br><span class="line">print(nd13[(nd13&gt;<span class="number">4</span>)&amp;(nd13&lt;<span class="number">9</span>)])</span><br><span class="line">print(nd13[[<span class="number">1</span>,<span class="number">3</span>]])</span><br><span class="line">print(nd13[:,<span class="number">1</span>:<span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<pre><code>[0.90348221 0.39308051 0.62396996 0.6378774  0.88049907 0.29917202
 0.70219827 0.90320616 0.88138193 0.4057498 ]
0.6378774010222266
[0.39308051 0.62396996 0.6378774 ]
[0.62396996 0.88049907 0.70219827 0.88138193]
[0.4057498  0.70219827 0.6378774  0.90348221]
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]]
[[6 7 8]]
[5 6 7 8]
[[ 5  6  7  8  9]
 [15 16 17 18 19]]
[[ 1  2]
 [ 6  7]
 [11 12]
 [16 17]
 [21 22]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#random.choice随机抽取</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> random <span class="keyword">as</span> nr</span><br><span class="line">a = np.arange(<span class="number">1</span>,<span class="number">25</span>,dtype=float)</span><br><span class="line">c1 = nr.choice(a,size=(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">c2 = nr.choice(a,size=(<span class="number">3</span>,<span class="number">4</span>),replace=<span class="literal">False</span>) <span class="comment">#replace缺省为True，即可重复抽取</span></span><br><span class="line">c3 = nr.choice(a,size=(<span class="number">3</span>,<span class="number">4</span>),p = a/np.sum(a))</span><br><span class="line">print(c1)</span><br><span class="line">print(c2)</span><br><span class="line">print(c3)</span><br></pre></td></tr></table></figure>

<pre><code>[[19.  6. 24. 22.]
 [21. 17. 16.  2.]
 [23. 15. 13. 11.]]
[[ 5. 14. 23. 15.]
 [ 8. 24.  6. 18.]
 [13. 10. 21. 11.]]
[[19. 21. 18. 11.]
 [10. 21. 23. 19.]
 [18. 19. 11. 20.]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#矩阵操作</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">nd15 = np.arange(<span class="number">9</span>).reshape([<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#转置</span></span><br><span class="line">print(np.transpose(nd15))</span><br><span class="line"></span><br><span class="line"><span class="comment">#乘法</span></span><br><span class="line">a = np.arange(<span class="number">12</span>).reshape([<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">b = np.arange(<span class="number">8</span>).reshape([<span class="number">4</span>,<span class="number">2</span>])</span><br><span class="line">print(a.dot(b))</span><br><span class="line"></span><br><span class="line"><span class="comment">#矩阵的迹</span></span><br><span class="line">print(a.trace())</span><br><span class="line"></span><br><span class="line"><span class="comment">#计算行列式</span></span><br><span class="line">print(np.linalg.det(nd15))</span><br><span class="line"></span><br><span class="line"><span class="comment">#逆矩阵</span></span><br><span class="line">c = np.random.random([<span class="number">3</span>,<span class="number">3</span>])</span><br><span class="line">print(np.linalg.solve(c,np.eye(<span class="number">3</span>)))</span><br></pre></td></tr></table></figure>

<pre><code>[[0 3 6]
 [1 4 7]
 [2 5 8]]
[[ 28  34]
 [ 76  98]
 [124 162]]
15
0.0
[[ 0.79111977  4.79625456 -2.59458683]
 [ 0.72853989 -3.64821752  1.90992826]
 [-2.01814852 -5.08596471  4.61137684]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数据的合并与展平</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">b = np.array([<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line">c = np.array([<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br><span class="line">print(np.append(a,b))</span><br><span class="line">print(np.concatenate([a,b]))</span><br></pre></td></tr></table></figure>

<pre><code>[1 2 3 4 5 6]
[1 2 3 4 5 6]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多维数组的合并</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">a = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">b = np.arange(<span class="number">4</span>).reshape(<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">#按行合并</span></span><br><span class="line">print(np.append(a,b,axis=<span class="number">0</span>))</span><br><span class="line"><span class="comment">#按列合并</span></span><br><span class="line">print(np.append(a,b,axis=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>

<pre><code>[[0 1]
 [2 3]
 [0 1]
 [2 3]]
[[0 1 0 1]
 [2 3 2 3]]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#展平</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">nd16 = np.arange(<span class="number">6</span>).reshape(<span class="number">2</span>,<span class="number">-1</span>)</span><br><span class="line">print(nd16)</span><br><span class="line"><span class="comment">#按列展平</span></span><br><span class="line">print(nd16.ravel(<span class="string">'F'</span>))</span><br><span class="line"><span class="comment">#按行展平</span></span><br><span class="line">print(nd16.ravel())</span><br></pre></td></tr></table></figure>

<pre><code>[[0 1 2]
 [3 4 5]]
[0 3 1 4 2 5]
[0 1 2 3 4 5]</code></pre>
      
    </div>

    

    
    
    

    <div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

  
</div>
    <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2019/07/26/python-numpy学习笔记/">python: numpy学习笔记</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 TongShiyuan 的个人博客">TongShiyuan</a></p>
  <p><span>发布时间:</span>2019年07月26日 - 10:07</p>
  <p><span>最后更新:</span>2019年07月26日 - 10:07</p>
  <p><span>原始链接:</span><a href="/2019/07/26/python-numpy学习笔记/" title="python: numpy学习笔记">http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://tongshiyuan.github.io/2019/07/26/python-numpy学习笔记/" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
    });
    });  
</script>

      
    </div>
    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
            <a href="/tags/numpy/" rel="tag"># numpy</a>
          
            <a href="/tags/数据科学/" rel="tag"># 数据科学</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/07/21/批量可视化fastp输出结果/" rel="next" title="批量可视化fastp输出结果">
                <i class="fa fa-chevron-left"></i> 批量可视化fastp输出结果
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/09/22/WGS分析笔记（6）- call CNV 和一些其他/" rel="prev" title="WGS分析笔记（6）- call CNV 和一些其他">
                WGS分析笔记（6）- call CNV 和一些其他 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/logo.jpg" alt="TongShiyuan">
            
              <p class="site-author-name" itemprop="name">TongShiyuan</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/tongshiyuan" title="GitHub &rarr; https://github.com/tongshiyuan" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.jianshu.com/u/4450f2e08883" title="简书 &rarr; https://www.jianshu.com/u/4450f2e08883" rel="noopener" target="_blank"><i class="fa fa-fw fa-heartbeat"></i>简书</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:shiyuant@outlook.com" title="E-Mail &rarr; mailto:shiyuant@outlook.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#列表与array的区别"><span class="nav-number">1.</span> <span class="nav-text">列表与array的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导入numpy"><span class="nav-number">2.</span> <span class="nav-text">导入numpy</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#array的创建"><span class="nav-number">3.</span> <span class="nav-text">array的创建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#从列表创建数组"><span class="nav-number">3.1.</span> <span class="nav-text">从列表创建数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#从头创建数组"><span class="nav-number">3.2.</span> <span class="nav-text">从头创建数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Numpy数据类型"><span class="nav-number">4.</span> <span class="nav-text">Numpy数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#指定方式"><span class="nav-number">4.1.</span> <span class="nav-text">指定方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据类型"><span class="nav-number">4.2.</span> <span class="nav-text">数据类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看属性"><span class="nav-number">5.</span> <span class="nav-text">查看属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据的索引"><span class="nav-number">6.</span> <span class="nav-text">数据的索引</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取单个元素"><span class="nav-number">6.1.</span> <span class="nav-text">获取单个元素</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据的切片"><span class="nav-number">7.</span> <span class="nav-text">数据的切片</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一维数组"><span class="nav-number">7.1.</span> <span class="nav-text">一维数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多维子数组"><span class="nav-number">7.2.</span> <span class="nav-text">多维子数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#行、列获取"><span class="nav-number">7.3.</span> <span class="nav-text">行、列获取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#非副本视图的子数组"><span class="nav-number">7.4.</span> <span class="nav-text">非副本视图的子数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建数组的副本"><span class="nav-number">7.5.</span> <span class="nav-text">创建数组的副本</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据的变形"><span class="nav-number">8.</span> <span class="nav-text">数据的变形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的拼接和分裂"><span class="nav-number">9.</span> <span class="nav-text">数组的拼接和分裂</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数组的拼接"><span class="nav-number">9.1.</span> <span class="nav-text">数组的拼接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数组的分裂"><span class="nav-number">9.2.</span> <span class="nav-text">数组的分裂</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通用函数"><span class="nav-number">10.</span> <span class="nav-text">通用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数组的运算"><span class="nav-number">10.1.</span> <span class="nav-text">数组的运算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#绝对值"><span class="nav-number">10.2.</span> <span class="nav-text">绝对值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三角函数"><span class="nav-number">10.3.</span> <span class="nav-text">三角函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#指数和对数"><span class="nav-number">10.4.</span> <span class="nav-text">指数和对数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级的通用函数特性"><span class="nav-number">11.</span> <span class="nav-text">高级的通用函数特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#指定输出"><span class="nav-number">11.1.</span> <span class="nav-text">指定输出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#聚合"><span class="nav-number">11.2.</span> <span class="nav-text">聚合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外积"><span class="nav-number">11.3.</span> <span class="nav-text">外积</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合：最大值、最小值和其他值"><span class="nav-number">12.</span> <span class="nav-text">聚合：最大值、最小值和其他值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-多维度聚合"><span class="nav-number">12.1.</span> <span class="nav-text">1. 多维度聚合</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-其他聚合函数"><span class="nav-number">12.2.</span> <span class="nav-text">2. 其他聚合函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#广播"><span class="nav-number">13.</span> <span class="nav-text">广播</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#广播的规则"><span class="nav-number">13.1.</span> <span class="nav-text">广播的规则</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#示例1"><span class="nav-number">13.1.1.</span> <span class="nav-text">示例1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例2"><span class="nav-number">13.1.2.</span> <span class="nav-text">示例2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#示例3"><span class="nav-number">13.1.3.</span> <span class="nav-text">示例3</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#广播的应用"><span class="nav-number">13.2.</span> <span class="nav-text">广播的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#数据的归一化"><span class="nav-number">13.2.1.</span> <span class="nav-text">数据的归一化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#画一个二维数组"><span class="nav-number">13.2.2.</span> <span class="nav-text">画一个二维数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较、掩码和布尔逻辑"><span class="nav-number">14.</span> <span class="nav-text">比较、掩码和布尔逻辑</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#比较操作"><span class="nav-number">14.1.</span> <span class="nav-text">比较操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作布尔数组"><span class="nav-number">14.2.</span> <span class="nav-text">操作布尔数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#将布尔数组作为掩码"><span class="nav-number">14.3.</span> <span class="nav-text">将布尔数组作为掩码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#花哨的索引"><span class="nav-number">15.</span> <span class="nav-text">花哨的索引</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#探索花哨的索引"><span class="nav-number">15.1.</span> <span class="nav-text">探索花哨的索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组合索引"><span class="nav-number">15.2.</span> <span class="nav-text">组合索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#示例：选择随机点"><span class="nav-number">15.3.</span> <span class="nav-text">示例：选择随机点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用花哨索引修改值"><span class="nav-number">15.4.</span> <span class="nav-text">用花哨索引修改值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#示例：数据区间划分"><span class="nav-number">15.5.</span> <span class="nav-text">示例：数据区间划分</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组的排序"><span class="nav-number">16.</span> <span class="nav-text">数组的排序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#快速排序"><span class="nav-number">16.1.</span> <span class="nav-text">快速排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#部分排序：分隔"><span class="nav-number">16.2.</span> <span class="nav-text">部分排序：分隔</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#示例：K个最近邻"><span class="nav-number">16.3.</span> <span class="nav-text">示例：K个最近邻</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结构化数据"><span class="nav-number">17.</span> <span class="nav-text">结构化数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#生成结构化数组"><span class="nav-number">17.1.</span> <span class="nav-text">生成结构化数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#跟高级的复合类型"><span class="nav-number">17.2.</span> <span class="nav-text">跟高级的复合类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#记录数组：结构化数组的扭转"><span class="nav-number">17.3.</span> <span class="nav-text">记录数组：结构化数组的扭转</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#附：还有一些其他的"><span class="nav-number">18.</span> <span class="nav-text">附：还有一些其他的</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">TongShiyuan</span>
<!--
  
-->
  
</div>

<!--

  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.2</div>



-->

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共33.2k字</span>
</div>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.2"></script>



  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
